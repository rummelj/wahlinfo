<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title>Wahlinformationssystem</title>
	<h:outputStylesheet library="css" name="layout.css" />
</h:head>
<h:body>
	<div id="content">
		<!-- Dialogs -->

		<!-- Terminal (Admin console) -->
		<p:dialog widgetVar="terminal" styleClass="terminal" width="600"
			height="400" header="Admin-Konsole" showEffect="fade"
			hideEffect="fade">
			<h:form>
				<p:terminal commandHandler="#{terminalController.handleCommand}"
					width="100%" height="100%"
					welcomeMessage="Hallo zur Wahlinformationsverwaltung. Was möchten Sie tun?"
					prompt="wahlinfo $ " />
			</h:form>
		</p:dialog>

		<!-- Seat distribution 2005 -->
		<p:dialog header="Sitzverteilung im Bundestag"
			widgetVar="seatdistributiondialog2005" dynamic="true"
			resizable="false">
			<p:pieChart id="seatdistributionpiechart2005"
				value="#{analyseController.seatDistribution2005}" legendPosition="w"
				title="2005" />
			<p:dataTable id="seatdistributiontable2005" var="partyAndSeats"
				value="#{analyseController.seatDistributionTable2005}">
				<f:facet name="header">  
            		Tabellarische Darstellung  
       		 	</f:facet>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Partei" />
					</f:facet>
					<h:outputText value="#{partyAndSeats.name}" />
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Anzahl Sitze" />
					</f:facet>
					<h:outputText value="#{partyAndSeats.seats}" />
				</p:column>
			</p:dataTable>
		</p:dialog>

		<!-- Seat distribution 2009 -->
		<p:dialog header="Sitzverteilung im Bundestag"
			widgetVar="seatdistributiondialog2009" dynamic="true"
			resizable="false">
			<p:pieChart id="seatdistributionpiechart2009"
				value="#{analyseController.seatDistribution2009}" legendPosition="w"
				title="2009" />
			<p:dataTable id="seatdistributiontable2009" var="partyAndSeats"
				value="#{analyseController.seatDistributionTable2009}">
				<f:facet name="header">  
            		Tabellarische Darstellung  
       		 	</f:facet>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Partei" />
					</f:facet>
					<h:outputText value="#{partyAndSeats.name}" />
				</p:column>
				<p:column>
					<f:facet name="header">
						<h:outputText value="Anzahl Sitze" />
					</f:facet>
					<h:outputText value="#{partyAndSeats.seats}" />
				</p:column>
			</p:dataTable>
		</p:dialog>

		<!-- Members of Bundestag 2005 -->
		<p:dialog header="Mitglieder des Bundestages"
			widgetVar="membersofbundestagdialog2005" dynamic="true"
			resizable="false">
			<p:dataTable id="membersofbundestagtable2005" var="candidate"
				value="#{analyseController.membersOfBundestag2005}" scrollRows="10"
				scrollable="true" scrollHeight="400">
				<f:facet name="header">  
            		2005  
       		 	</f:facet>
				<p:column width="200" sortBy="#{candidate.name}">
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<h:outputText value="#{candidate.name}" />
				</p:column>
				<p:column width="70" sortBy="#{candidate.party.name}">
					<f:facet name="header">
						<h:outputText value="Partei" />
					</f:facet>
					<h:outputText value="#{candidate.party.name}" />
				</p:column>
				<p:column width="250" sortBy="#{candidate.electoralDistrict}">
					<f:facet name="header">
						<h:outputText value="Wahlkreis" />
					</f:facet>
					<h:outputText value="#{candidate.electoralDistrict}" />
				</p:column>
				<p:column width="150" sortBy="#{candidate.federalState}">
					<f:facet name="header">
						<h:outputText value="Bundesland" />
					</f:facet>
					<h:outputText value="#{candidate.federalState}" />
				</p:column>
			</p:dataTable>
		</p:dialog>

		<!-- Members of Bundestag 2009 -->
		<p:dialog header="Mitglieder des Bundestages"
			widgetVar="membersofbundestagdialog2009" dynamic="true"
			resizable="false">
			<p:dataTable id="membersofbundestagtable2009" var="candidate"
				value="#{analyseController.membersOfBundestag2009}" scrollRows="10"
				scrollable="true" scrollHeight="400">
				<f:facet name="header">  
            		2009  
       		 	</f:facet>
				<p:column width="200" sortBy="#{candidate.name}">
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<h:outputText value="#{candidate.name}" />
				</p:column>
				<p:column width="70" sortBy="#{candidate.party.name}">
					<f:facet name="header">
						<h:outputText value="Partei" />
					</f:facet>
					<h:outputText value="#{candidate.party.name}" />
				</p:column>
				<p:column width="250" sortBy="#{candidate.electoralDistrict}">
					<f:facet name="header">
						<h:outputText value="Wahlkreis" />
					</f:facet>
					<h:outputText value="#{candidate.electoralDistrict}" />
				</p:column>
				<p:column width="150" sortBy="#{candidate.federalState}">
					<f:facet name="header">
						<h:outputText value="Bundesland" />
					</f:facet>
					<h:outputText value="#{candidate.federalState}" />
				</p:column>
			</p:dataTable>
		</p:dialog>

		<!-- Info about one electoral district -->
		<p:dialog header="Informationen zu einem Wahlkreis"
			widgetVar="wahlkreisinfodialog" dynamic="true" resizable="false">
			<h:form id="wahlkreisinfodialogform">
				<table>
					<tr>
						<td><p:panel header="Wahljahr">
								<p:selectOneListbox id="wahlkreisinfowizarddistrictscrollyear"
									value="#{wahlkreisInfoWizard.electionYear}"
									style="height:50px;width:350px">
									<f:selectItems value="#{wahlkreisInfoWizard.electionYears}"
										var="electionYear" itemLabel="#{electionYear}"
										itemValue="#{electionYear}" />
									<p:ajax event="change" update="wahlkreisinfodata" />
								</p:selectOneListbox>
							</p:panel></td>
						<td rowspan="2"><p:panel header="Informationen"
								id="wahlkreisinfodata" style="height:500px;width:450px">
								<h3>
									<h:outputText
										value="#{wahlkreisInfoWizard.district} (#{wahlkreisInfoWizard.electionYear})" />
								</h3>
								<p>
									Wahlbeteiligung:&nbsp;<strong> <h:outputText
											value="#{wahlkreisInfoWizard.wahlbeteiligung}" />
									</strong><br /> Gewählter Direktkandidat:&nbsp;<strong><h:outputText
											value="#{wahlkreisInfoWizard.directCandidate}" /></strong>
								</p>
								<br />
								<p:dataTable id="voteDetailsInElectoralDistrict"
									var="voteDetail" value="#{wahlkreisInfoWizard.voteDetails}"
									scrollable="true" scrollHeight="200">
									<f:facet name="header">  
            							Statistiken
       		 						</f:facet>
									<p:column width="100">
										<f:facet name="header">
											<h:outputText style="font-size:x-small" value="Partei" />
										</f:facet>
										<h:outputText value="#{voteDetail.party.name}" />
									</p:column>
									<p:column width="140">
										<f:facet name="header">
											<h:outputText value="#Stimmen" style="font-size:x-small" />
											<br />
											<h:outputText value="absolut" style="font-size:x-small" />
										</f:facet>
										<h:outputText style="color: green; font-size:small"
											rendered="#{voteDetail.comparisonToLastYearInVotesReceived ge 0}"
											value="#{voteDetail.votesReceived} (+#{voteDetail.comparisonToLastYearInVotesReceived})" />
										<h:outputText style="color: red; font-size:small"
											rendered="#{voteDetail.comparisonToLastYearInVotesReceived le 0}"
											value="#{voteDetail.votesReceived} (#{voteDetail.comparisonToLastYearInVotesReceived})" />
									</p:column>
									<p:column width="110">
										<f:facet name="header">
											<h:outputText value="#Stimmen" style="font-size:x-small" />
											<br />
											<h:outputText value="Prozent" style="font-size:x-small" />
										</f:facet>
										<h:outputText style="color: green; font-size:small"
											rendered="#{voteDetail.comparisonToLastYearInPercentageVotesReceived ge 0}"
											value="#{voteDetail.percentageVotesReceived} (+#{voteDetail.comparisonToLastYearInPercentageVotesReceived})" />
										<h:outputText style="color: red; font-size:small"
											rendered="#{voteDetail.comparisonToLastYearInPercentageVotesReceived le 0}"
											value="#{voteDetail.percentageVotesReceived} (#{voteDetail.comparisonToLastYearInPercentageVotesReceived})" />

									</p:column>
								</p:dataTable>
							</p:panel></td>
					</tr>
					<tr>
						<td><p:panel header="Wahlkreis">
								<p:selectOneListbox
									id="wahlkreisinfowizarddistrictscrolldistrict"
									value="#{wahlkreisInfoWizard.district}"
									style="height:300px;width:350px">
									<f:selectItems value="#{wahlkreisInfoWizard.districts}"
										var="district" itemLabel="#{district}" itemValue="#{district}" />
									<p:ajax event="change" update="wahlkreisinfodata" />
								</p:selectOneListbox>
							</p:panel></td>
						<td></td>
					</tr>
				</table>
			</h:form>
		</p:dialog>

		<!-- Wahlkreissieger 2005 -->
		<p:dialog header="Informationen zu einem Wahlkreis"
			widgetVar="wahlkreissiegerdialog2005" dynamic="true"
			resizable="false">
			<p:dataTable id="wahlkreissiegerdialogtable2005" var="winner"
				value="#{analyseController.electoralDistrictWinnersOverview2005}"
				scrollable="true" scrollHeight="400">
				<f:facet name="header">  
            							Gewinner nach Wahlkreisen 2005
       		 						</f:facet>
				<p:column width="300" sortBy="#{winner.electoralDistrict}">
					<f:facet name="header">
						<h:outputText value="Wahlkreis" />
					</f:facet>
					<h:outputText value="#{winner.electoralDistrict}" />
				</p:column>
				<p:column width="80">
					<f:facet name="header">
						<h:outputText style="font-size:x-small" value="Sieger" />
						<br />
						<h:outputText style="font-size:x-small" value="Erststimme" />
					</f:facet>
					<h:outputText value="#{winner.winnerFirstVote.name}" />
				</p:column>
				<p:column width="80">
					<f:facet name="header">
						<h:outputText style="font-size:x-small" value="Sieger" />
						<br />
						<h:outputText style="font-size:x-small" value="Zweitstimme" />
					</f:facet>
					<h:outputText value="#{winner.winnerSecondVote.name}" />
				</p:column>
			</p:dataTable>
		</p:dialog>

		<!-- Wahlkreissieger 2009 -->
		<p:dialog header="Informationen zu einem Wahlkreis"
			widgetVar="wahlkreissiegerdialog2009" dynamic="true"
			resizable="false">
			<p:dataTable id="wahlkreissiegerdialogtable2009" var="winner"
				value="#{analyseController.electoralDistrictWinnersOverview2009}"
				scrollable="true" scrollHeight="400">
				<f:facet name="header">  
            							Gewinner nach Wahlkreisen 2009
       		 						</f:facet>
				<p:column width="300">
					<f:facet name="header">
						<h:outputText value="Wahlkreis" />
					</f:facet>
					<h:outputText value="#{winner.electoralDistrict}" />
				</p:column>
				<p:column width="80">
					<f:facet name="header">
						<h:outputText style="font-size:x-small" value="Sieger" />
						<br />
						<h:outputText style="font-size:x-small" value="Erststimme" />
					</f:facet>
					<h:outputText value="#{winner.winnerFirstVote.name}" />
				</p:column>
				<p:column width="80">
					<f:facet name="header">
						<h:outputText style="font-size:x-small" value="Sieger" />
						<br />
						<h:outputText style="font-size:x-small" value="Zweitstimme" />
					</f:facet>
					<h:outputText value="#{winner.winnerSecondVote.name}" />
				</p:column>
			</p:dataTable>
		</p:dialog>

		<!-- Überhangmandate 2005 -->
		<p:dialog header="Überhangmandate 2005"
			widgetVar="overhangMandatesdialog2005" dynamic="true"
			resizable="false">
			<p:dataTable id="overhangMandatesdialogtable2005" var="mandate"
				value="#{analyseController.overhangMandates2005}" scrollable="true"
				scrollHeight="250">
				<f:facet name="header">  
            							Anzahl Überhangmandate 2005
       		 						</f:facet>
				<p:column width="100" sortBy="#{mandate.party.name}">
					<f:facet name="header">
						<h:outputText value="Partei" />
					</f:facet>
					<h:outputText value="#{mandate.party.name}" />
				</p:column>
				<p:column width="200" sortBy="#{mandate.federalState.name}">
					<f:facet name="header">
						<h:outputText style="font-size:small" value="Bundesland" />
					</f:facet>
					<h:outputText value="#{mandate.federalState.name}" />
				</p:column>
				<p:column width="80" sortBy="#{mandate.numberOfMandates}">
					<f:facet name="header">
						<h:outputText style="font-size:small" value="# Mandate" />
					</f:facet>
					<h:outputText value="#{mandate.numberOfMandates}" />
				</p:column>
			</p:dataTable>
		</p:dialog>

		<!-- Überhangmandate 2009 -->
		<p:dialog header="Überhangmandate 2009"
			widgetVar="overhangMandatesdialog2009" dynamic="true"
			resizable="false">
			<p:dataTable id="overhangMandatesdialogtable2009" var="mandate"
				value="#{analyseController.overhangMandates2009}" scrollable="true"
				scrollHeight="250">
				<f:facet name="header">  
            							Anzahl Überhangmandate 2009
       		 						</f:facet>
				<p:column width="100" sortBy="#{mandate.party.name}">
					<f:facet name="header">
						<h:outputText value="Partei" />
					</f:facet>
					<h:outputText value="#{mandate.party.name}" />
				</p:column>
				<p:column width="200" sortBy="#{mandate.federalState.name}">
					<f:facet name="header">
						<h:outputText style="font-size:small" value="Bundesland" />
					</f:facet>
					<h:outputText value="#{mandate.federalState.name}" />
				</p:column>
				<p:column width="80" sortBy="#{mandate.numberOfMandates}">
					<f:facet name="header">
						<h:outputText style="font-size:small" value="# Mandate" />
					</f:facet>
					<h:outputText value="#{mandate.numberOfMandates}" />
				</p:column>
			</p:dataTable>
		</p:dialog>

		<h:form>
			<p:menubar>
				<p:submenu label="Sitzverteilung">
					<p:menuitem value="2009"
						onclick="seatdistributiondialog2009.show()"></p:menuitem>
					<p:menuitem value="2005"
						onclick="seatdistributiondialog2005.show()"></p:menuitem>
				</p:submenu>
				<p:submenu label="Mandate">
					<p:menuitem value="2009"
						onclick="membersofbundestagdialog2009.show()"></p:menuitem>
					<p:menuitem value="2005"
						onclick="membersofbundestagdialog2005.show()"></p:menuitem>
				</p:submenu>
				<p:submenu label="Wahlkreissieger">
					<p:menuitem value="2009" onclick="wahlkreissiegerdialog2009.show()"></p:menuitem>
					<p:menuitem value="2005" onclick="wahlkreissiegerdialog2005.show()"></p:menuitem>
				</p:submenu>
				<p:submenu label="Überhangmandate">
					<p:menuitem value="2009"
						onclick="overhangMandatesdialog2009.show()"></p:menuitem>
					<p:menuitem value="2005"
						onclick="overhangMandatesdialog2005.show()"></p:menuitem>
				</p:submenu>

			</p:menubar>
		</h:form>
		<p:dock>
			<p:menuitem label="Wahlkreisinfo"
				icon="resources/images/fragezeichen.png" url="#"
				onclick="wahlkreisinfodialog.show()" />
			<p:menuitem label="Terminal" icon="resources/images/terminal.png"
				url="#" onclick="terminal.show();term.focus();" />
		</p:dock>
	</div>
</h:body>
</html>